# 分布式服务框架
所有的服务都是actor模型,由消息作为服务之间的调用
服务默认是单线程执行,支持多线程执行

## 感谢 github.com/duanhf2012/origin 作者大哥,我的这个框架有很多东西都是抄他的,感谢他的开源

````
主要的框架结构和origin是一致的,整个框架分为三部分:
1. node 节点
2. service 服务
3. module 模块

node: 即独立运行的进程, 每个节点上可以运行多个service服务
service: 即一个actor, 以协程的形式运行, 支持多线程执行, 每个service中可以包含多个module
module: 即最小的业务单元, module无法独立运行, 必须依附于service, 是组成service功能的基础单位
````

````
集群:
1. 每个节点都会启动自己的集群模块, 用来管理整个集群中的其他可调用服务
2. 服务发现模块, 所有service,只要包含RPC开头的接口, 这个service就会被注册到集群中,供其他服务调用
3. 服务启动后会自动注册
4. 服务发现是通过etcd实现的, 目前暂时未抽离成接口, 后续有空再弄, 这样就可以接入自己的服务发现
5. 远程调用目前使用的是rpcx, 可以自行加入自己的rpc框架
````

````
1. 目前实现了本节点内的服务调用和跨界点服务调用
2. 使用etcd作为服务发现中心
3. rpcx作为rpc框架
````

#### FUTURE
````
1. 热更新(这个估摸很难在这个框架中支持)
2. 自动扩容(这已经是具体的业务需求了)
3. 自动负载均衡(需要提供策略)
4. 后台服务管理
5. 自动服务监控调度(不出意外应该是给出调度规则,然后自动调度,应该可以使用temporal,给一个调度配置,然后自动调度)
````

### TIPS
````
1. 敏感配置在打包时请使用 //go:embed config.yaml 嵌入到二进制中
2. 在重要的程序返回error时,请使用errlib.CError,以便返回更详细的错误信息,能快速的定位到报错的位置
````